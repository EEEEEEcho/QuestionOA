$(function(){$(".js-basic-example").DataTable();$(".js-exportable").DataTable({dom:"Bfrtip",buttons:["copy","csv","excel","pdf","print"]})});function format(a){return'<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;"><tr><td>Full name:</td><td>'+a.name+"</td></tr><tr><td>Extension number:</td><td>"+a.extn+"</td></tr><tr><td>Extra info:</td><td>And any further details here (images etc)...</td></tr></table>"}$(document).ready(function(){var a=$("#example").DataTable({ajax:"assets/data/objects.txt",columns:[{className:"details-control",orderable:false,data:null,defaultContent:""},{data:"name"},{data:"position"},{data:"office"},{data:"salary"}],order:[[1,"asc"]]});$("#example tbody").on("click","td.details-control",function(){var c=$(this).closest("tr");var b=a.row(c);if(b.child.isShown()){b.child.hide();c.removeClass("shown")}else{b.child(format(b.data())).show();c.addClass("shown")}})});var addRowTable={options:{addButton:"#addToTable",table:"#addrowExample",dialog:{}},initialize:function(){this.setVars().build().events()},setVars:function(){return this.$table=$(this.options.table),this.$addButton=$(this.options.addButton),this.dialog={},this.dialog.$wrapper=$(this.options.dialog.wrapper),this.dialog.$cancel=$(this.options.dialog.cancelButton),this.dialog.$confirm=$(this.options.dialog.confirmButton),this},build:function(){return this.datatable=this.$table.DataTable({aoColumns:[null,null,null,{bSortable:!1}],}),window.dt=this.datatable,this},events:function(){var a=this;return this.$table.on("click","button.button-save",function(b){b.preventDefault(),a.rowSave($(this).closest("tr"))}).on("click","button.button-discard",function(b){b.preventDefault(),a.rowCancel($(this).closest("tr"))}).on("click","button.button-edit",function(b){b.preventDefault(),a.rowEdit($(this).closest("tr"))}).on("click","button.button-remove",function(c){c.preventDefault();var b=$(this).closest("tr");swal({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",type:"warning",showCancelButton:true,confirmButtonColor:"#dc3545",confirmButtonText:"Yes, delete it!",closeOnConfirm:false},function(){a.rowRemove(b);swal("Deleted!","Your imaginary file has been deleted.","success")})}),this.$addButton.on("click",function(b){b.preventDefault(),a.rowAdd()}),this.dialog.$cancel.on("click",function(b){b.preventDefault(),$.magnificPopup.close()}),this},rowAdd:function(){this.$addButton.attr({disabled:"disabled"});var b,c,a;b=['<button class="btn btn-sm btn-icon btn-pure btn-default on-editing button-save" data-toggle="tooltip" data-original-title="Save" hidden><i class="icon-drawer" aria-hidden="true"></i></button>','<button class="btn btn-sm btn-icon btn-pure btn-default on-editing button-discard" data-toggle="tooltip" data-original-title="Discard" hidden><i class="icon-close" aria-hidden="true"></i></button>','<button class="btn btn-sm btn-icon btn-pure btn-default on-default button-edit" data-toggle="tooltip" data-original-title="Edit"><i class="icon-pencil" aria-hidden="true"></i></button>','<button class="btn btn-sm btn-icon btn-pure btn-default on-default button-remove" data-toggle="tooltip" data-original-title="Remove"><i class="icon-trash" aria-hidden="true"></i></button>'].join(" "),c=this.datatable.row.add(["","","",b]),(a=this.datatable.row(c[0]).nodes().to$()).addClass("adding").find("td:last").addClass("actions"),this.rowEdit(a),this.datatable.order([0,"asc"]).draw()},rowCancel:function(b){var a,c;b.hasClass("adding")?this.rowRemove(b):((a=b.find("td.actions")).find(".button-discard").tooltip("hide"),a.get(0)&&this.rowSetActionsDefault(b),c=this.datatable.row(b.get(0)).data(),this.datatable.row(b.get(0)).data(c),this.handleTooltip(b),this.datatable.draw())},rowEdit:function(a){var b,c=this;b=this.datatable.row(a.get(0)).data(),a.children("td").each(function(e){var d=$(this);d.hasClass("actions")?c.rowSetActionsEditing(a):d.html('<input type="text" class="form-control input-block" value="'+b[e]+'"/>')})},rowSave:function(b){var a,c=this,d=[];b.hasClass("adding")&&(this.$addButton.removeAttr("disabled"),b.removeClass("adding")),d=b.find("td").map(function(){var e=$(this);return e.hasClass("actions")?(c.rowSetActionsDefault(b),c.datatable.cell(this).data()):$.trim(e.find("input").val())}),(a=b.find("td.actions")).find(".button-save").tooltip("hide"),a.get(0)&&this.rowSetActionsDefault(b),this.datatable.row(b.get(0)).data(d),this.handleTooltip(b),this.datatable.draw()},rowRemove:function(a){a.hasClass("adding")&&this.$addButton.removeAttr("disabled"),this.datatable.row(a.get(0)).remove().draw()},rowSetActionsEditing:function(a){a.find(".on-editing").removeAttr("hidden"),a.find(".on-default").attr("hidden",!0)},rowSetActionsDefault:function(a){a.find(".on-editing").attr("hidden",!0),a.find(".on-default").removeAttr("hidden")},handleTooltip:function(a){a.find('[data-toggle="tooltip"]').tooltip()}};$(function(){addRowTable.initialize()});